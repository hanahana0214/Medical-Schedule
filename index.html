<!DOCTYPE html>
<!-- saved from url=(0158)file:///C:/Users/hanah/Downloads/%E9%80%9A%E9%99%A2%E7%AE%A1%E7%90%86%E3%82%A2%E3%83%97%E3%83%AA_%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC%E7%89%88_1.html -->
<html lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚°ãƒ«ãƒ¼ãƒ—ãƒ›ãƒ¼ãƒ é€šé™¢ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'Hiragino Sans', sans-serif;
            background-color: #f5f5f5;
        }
        
        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .tab-btn {
            padding: 10px 20px;
            background: #e0e0e0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .tab-btn.active {
            background: #667eea;
            color: white;
        }
        
        .tab-btn:hover {
            transform: translateY(-2px);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ“ãƒ¥ãƒ¼ */
        .calendar-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .calendar-header h2 {
            font-size: 24px;
            color: #333;
        }
        
        .calendar-nav {
            display: flex;
            gap: 10px;
        }
        
        .calendar-nav button {
            padding: 8px 15px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .calendar-nav button:hover {
            background: #5568d3;
        }
        
        .calendar {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .calendar th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: bold;
        }
        
        .calendar td {
            border: 1px solid #ddd;
            padding: 15px;
            min-height: 100px;
            vertical-align: top;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .calendar td:hover {
            background: #f0f4ff;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
        }
        
        .calendar-day-num {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }
        
        .calendar-schedules {
            font-size: 12px;
            color: #666;
        }
        
        .schedule-item {
            background: #e3f2fd;
            padding: 5px;
            margin-bottom: 3px;
            border-radius: 3px;
            border-left: 3px solid #667eea;
        }
        
        .schedule-item-name {
            font-weight: bold;
            color: #333;
        }
        
        .schedule-item-hospital {
            font-size: 11px;
            color: #666;
        }
        
        .calendar td.other-month {
            background: #f9f9f9;
            color: #ccc;
        }
        
        .calendar td.today {
            background: #fff9e6;
            border: 2px solid #f39c12;
        }
        
        /* è©³ç´°ãƒ“ãƒ¥ãƒ¼ */
        .details-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .selected-date-info {
            background: #f0f4ff;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }
        
        .selected-date-info h2 {
            font-size: 24px;
            color: #333;
            margin-bottom: 10px;
        }
        
        .visit-list {
            display: grid;
            gap: 20px;
        }
        
        .visit-card {
            background: #f9f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s;
        }
        
        .visit-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }
        
        .visit-card h3 {
            font-size: 18px;
            color: #333;
            margin-bottom: 15px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        
        .visit-detail {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .detail-row {
            font-size: 14px;
        }
        
        .detail-label {
            font-weight: bold;
            color: #666;
            margin-bottom: 3px;
        }
        
        .detail-value {
            color: #333;
            font-size: 15px;
            padding: 8px;
            background: white;
            border-radius: 4px;
            border-left: 3px solid #667eea;
            padding-left: 12px;
        }
        
        .no-visits {
            text-align: center;
            color: #999;
            padding: 40px;
            font-size: 16px;
        }
        
        .no-data-message {
            text-align: center;
            color: #999;
            padding: 20px;
            font-size: 14px;
        }
        
        .visit-form {
            background: #f0f4ff;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            border: 1px solid #667eea;
        }
        
        .visit-form label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 13px;
            color: #333;
        }
        
        .visit-form input,
        .visit-form select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 13px;
        }
        
        .visit-form button {
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .visit-form button:hover {
            background: #5568d3;
        }
        
        .edit-delete-btns {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .edit-btn, .delete-btn {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .edit-btn {
            background: #3498db;
            color: white;
        }
        
        .edit-btn:hover {
            background: #2980b9;
        }
        
        .delete-btn {
            background: #e74c3c;
            color: white;
        }
        
        .delete-btn:hover {
            background: #c0392b;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.show {
            display: flex;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }
        
        .modal-header {
            font-size: 20px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: 500;
            font-size: 14px;
        }
        
        .form-group input, 
        .form-group select, 
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            font-family: inherit;
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        .modal-footer {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .modal-footer button {
            flex: 1,
            padding: 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn-confirm {
            background: #667eea;
            color: white;
        }
        
        .btn-confirm:hover {
            background: #5568d3;
        }
        
        .btn-cancel {
            background: #e0e0e0;
            color: #333;
        }
        
        .btn-cancel:hover {
            background: #d0d0d0;
        }
        
        .alert {
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-size: 14px;
        }
        
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        @media (max-width: 1024px) {
            .visit-detail {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1>ğŸ¥ ã‚°ãƒ«ãƒ¼ãƒ—ãƒ›ãƒ¼ãƒ é€šé™¢ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </h1>
            <p>1ãƒ¶æœˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§é€šé™¢äºˆå®šã‚’ä¸€å…ƒç®¡ç†</p>
        </div>
        
        <div id="alert-container"></div>
        
        <div class="tab-buttons">
            <button class="tab-btn" onclick="switchTab('calendar')">ğŸ“… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º</button>
            <button class="tab-btn active" onclick="switchTab('details')">ğŸ“‹ è©³ç´°æƒ…å ±</button>
        </div>
        
        <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¿ãƒ– -->
        <div id="calendar" class="tab-content">
            <div class="calendar-container">
                <div class="calendar-header">
                    <h2 id="calendar-title">2025å¹´ 11æœˆ</h2>
                    <div class="calendar-nav">
                        <button onclick="prevMonth()">â—€ å‰æœˆ</button>
                        <button onclick="today()">ä»Šæœˆ</button>
                        <button onclick="nextMonth()">æ¬¡æœˆ â–¶</button>
                    </div>
                </div>
                <table class="calendar" id="calendar-table"></table>
            </div>
        </div>
        
        <!-- è©³ç´°ã‚¿ãƒ– -->
        <div id="details" class="tab-content active">
            <div class="details-container">
                <div class="selected-date-info">
                    <h2 id="selected-date-display">2025å¹´11æœˆ7æ—¥ (é‡‘)</h2>
                </div>
                <div id="visit-details-area">
                    <div class="no-visits">ã“ã®æ—¥ä»˜ã«ã¯é€šé™¢äºˆå®šãŒã‚ã‚Šã¾ã›ã‚“</div>
                    <div style="margin-top: 20px;">
                        <button onclick="openAddVisitModal('2025-11-07')" style="width: 100%; padding: 12px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 14px;">
                            + ã“ã®æ—¥ä»˜ã«é€šé™¢äºˆå®šã‚’è¿½åŠ 
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- é€šé™¢æƒ…å ±è¿½åŠ ãƒ»ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="modal" id="visit-modal">
        <div class="modal-content">
            <div class="modal-header" id="visit-modal-title">é€šé™¢æƒ…å ±ã‚’è¿½åŠ </div>
            
            <div class="form-group">
                <label>åˆ©ç”¨è€…å *</label>
                <input type="text" id="visit-user-name" placeholder="ä¾‹ï¼šç”°ä¸­å¤ªéƒ">
            </div>
            
            <div class="form-group">
                <label>åŒ»ç™‚æ©Ÿé–¢å *</label>
                <input type="text" id="visit-hospital-name" placeholder="ä¾‹ï¼šã€‡ã€‡ç·åˆç—…é™¢">
            </div>
            
            <div class="form-group">
                <label>ç§‘ç›®</label>
                <input type="text" id="visit-department" placeholder="ä¾‹ï¼šå†…ç§‘">
            </div>
            
            <div class="form-group">
                <label>åŒ»å¸«å</label>
                <input type="text" id="visit-doctor" placeholder="ä¾‹ï¼šå±±ç”°åŒ»å¸«">
            </div>
            
            <div class="form-group">
                <label>é€šé™¢æ™‚é–“</label>
                <input type="time" id="visit-time">
            </div>
            
            <div class="form-group">
                <label>é€šé™¢æ‰‹æ®µ</label>
                <select id="visit-transport">
                    <option value="">é¸æŠ</option>
                    <option value="ã‚°ãƒ«ãƒ¼ãƒ—ãƒ›ãƒ¼ãƒ è·å“¡ãŒé€è¿">ã‚°ãƒ«ãƒ¼ãƒ—ãƒ›ãƒ¼ãƒ è·å“¡ãŒé€è¿</option>
                    <option value="ç¦ç¥‰ã‚¿ã‚¯ã‚·ãƒ¼">ç¦ç¥‰ã‚¿ã‚¯ã‚·ãƒ¼</option>
                    <option value="å…¬å…±äº¤é€šæ©Ÿé–¢">å…¬å…±äº¤é€šæ©Ÿé–¢</option>
                    <option value="æœ¬äººãŒç‹¬è‡ªã«ç§»å‹•">æœ¬äººãŒç‹¬è‡ªã«ç§»å‹•</option>
                    <option value="ãã®ä»–">ãã®ä»–</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>å¼•ç‡è·å“¡</label>
                <input type="text" id="visit-staff" placeholder="ä¾‹ï¼šå±±ç”°å¤ªéƒ">
            </div>
            
            <div class="form-group">
                <label>åŒ»ç™‚æ©Ÿé–¢ã®é›»è©±ç•ªå·</label>
                <input type="tel" id="visit-phone" placeholder="ä¾‹ï¼š03-1234-5678">
            </div>
            
            <div class="form-group">
                <label>å‚™è€ƒ</label>
                <textarea id="visit-notes" placeholder="ä¾‹ï¼šäº‹å‰ã®æ¤œæŸ»ãŒå¿…è¦ã€ä¿é™ºè¨¼ã‚’æŒå‚ãªã©"></textarea>
            </div>
            
            <div class="modal-footer">
                <button class="btn-confirm" id="visit-btn-confirm" onclick="saveVisit()">è¿½åŠ </button>
                <button class="btn-cancel" onclick="closeVisitModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            </div>
        </div>
    </div>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let visits = [];
        let currentDate = new Date();
        let selectedDate = null;
        let editingVisitId = null;

        // åˆæœŸåŒ–
        function init() {
            loadVisits();
            renderCalendar();
        }

        // ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ãƒ‰
        function loadVisits() {
            const saved = localStorage.getItem('visits');
            if (saved) {
                visits = JSON.parse(saved);
            } else {
                visits = [
                    {
                        id: 1,
                        date: '2025-01-06',
                        userName: 'ç”°ä¸­å¤ªéƒ',
                        hospitalName: 'ã€‡ã€‡ç·åˆç—…é™¢',
                        department: 'å†…ç§‘',
                        doctor: 'å±±ç”°åŒ»å¸«',
                        time: '09:00',
                        transport: 'ã‚°ãƒ«ãƒ¼ãƒ—ãƒ›ãƒ¼ãƒ è·å“¡ãŒé€è¿',
                        staff: 'éˆ´æœ¨è·å“¡',
                        phone: '03-1234-5678',
                        notes: 'å®šæœŸæ¤œè¨º'
                    },
                    {
                        id: 2,
                        date: '2025-01-10',
                        userName: 'éˆ´æœ¨èŠ±å­',
                        hospitalName: 'Ã—Ã—ç²¾ç¥ç§‘ã‚¯ãƒªãƒ‹ãƒƒã‚¯',
                        department: 'ç²¾ç¥ç§‘',
                        doctor: 'ä½è—¤åŒ»å¸«',
                        time: '10:30',
                        transport: 'ã‚°ãƒ«ãƒ¼ãƒ—ãƒ›ãƒ¼ãƒ è·å“¡ãŒé€è¿',
                        staff: 'ç”°ä¸­è·å“¡',
                        phone: '03-5555-6666',
                        notes: 'ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—'
                    },
                    {
                        id: 3,
                        date: '2025-01-13',
                        userName: 'ç”°ä¸­å¤ªéƒ',
                        hospitalName: 'â–³â–³æ­¯ç§‘ã‚¯ãƒªãƒ‹ãƒƒã‚¯',
                        department: 'æ­¯ç§‘',
                        doctor: 'ç”°ä¸­åŒ»å¸«',
                        time: '14:00',
                        transport: 'ã‚°ãƒ«ãƒ¼ãƒ—ãƒ›ãƒ¼ãƒ è·å“¡ãŒé€è¿',
                        staff: 'ä½è—¤è·å“¡',
                        phone: '03-9876-5432',
                        notes: 'å®šæœŸæ¤œè¨º'
                    }
                ];
                saveVisits();
            }
        }

        // ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
        function saveVisits() {
            localStorage.setItem('visits', JSON.stringify(visits));
        }

        // ã‚¿ãƒ–ã‚’åˆ‡ã‚Šæ›¿ãˆ
        function switchTab(tab) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById(tab).classList.add('active');
            
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            event.target.classList.add('active');
        }

        // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’æç”»
        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            // ã‚¿ã‚¤ãƒˆãƒ«ã‚’æ›´æ–°
            const monthNames = ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'];
            document.getElementById('calendar-title').textContent = `${year}å¹´ ${monthNames[month]}`;
            
            // æœˆã®æœ€åˆã¨æœ€å¾Œã®æ—¥ã‚’å–å¾—
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const firstDayOfWeek = firstDay.getDay();
            const daysInMonth = lastDay.getDate();
            
            // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ã‚’ç”Ÿæˆ
            let calendarHTML = '<tr>';
            const dayNames = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];
            
            // ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œ
            calendarHTML += '<tr>';
            for (let i = 0; i < 7; i++) {
                calendarHTML += '<th>' + dayNames[i] + '</th>';
            }
            calendarHTML += '</tr><tr>';
            
            // å‰æœˆã®ç©ºç™½
            for (let i = 0; i < firstDayOfWeek; i++) {
                calendarHTML += '<td class="other-month"></td>';
            }
            
            // å½“æœˆã®æ—¥ä»˜
            let cellCount = firstDayOfWeek;
            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const daySchedules = visits.filter(v => v.date === dateStr);
                
                const isToday = new Date().toDateString() === new Date(year, month, day).toDateString();
                const cellClass = isToday ? 'today' : '';
                
                calendarHTML += `<td class="${cellClass}" onclick="selectDate('${dateStr}')">
                    <div class="calendar-day-num">${day}</div>
                    <div class="calendar-schedules">`;
                
                daySchedules.forEach(schedule => {
                    calendarHTML += `<div class="schedule-item">
                        <div class="schedule-item-name">${schedule.userName}</div>
                        <div class="schedule-item-hospital">${schedule.hospitalName}</div>
                    </div>`;
                });
                
                calendarHTML += '</div></td>';
                cellCount++;
                
                if (cellCount % 7 === 0 && day < daysInMonth) {
                    calendarHTML += '</tr><tr>';
                }
            }
            
            // æ¬¡æœˆã®ç©ºç™½ã‚’åŸ‹ã‚ã‚‹
            const remainingCells = 42 - cellCount;
            for (let i = 0; i < remainingCells; i++) {
                calendarHTML += '<td class="other-month"></td>';
            }
            
            calendarHTML += '</tr>';
            
            document.getElementById('calendar-table').innerHTML = calendarHTML;
        }

        // æ—¥ä»˜ã‚’é¸æŠ
        function selectDate(dateStr) {
            selectedDate = dateStr;
            const date = new Date(dateStr);
            const dayNames = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];
            const dateDisplay = `${date.getFullYear()}å¹´${date.getMonth() + 1}æœˆ${date.getDate()}æ—¥ (${dayNames[date.getDay()]})`;
            
            document.getElementById('selected-date-display').textContent = dateDisplay;
            
            renderDateDetails(dateStr);
            
            // è©³ç´°ã‚¿ãƒ–ã«è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById('details').classList.add('active');
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn')[1].classList.add('active');
        }

        // é¸æŠæ—¥ä»˜ã®è©³ç´°ã‚’æç”»
        function renderDateDetails(dateStr) {
            const dayVisits = visits.filter(v => v.date === dateStr);
            let html = '';
            
            if (dayVisits.length === 0) {
                html = '<div class="no-visits">ã“ã®æ—¥ä»˜ã«ã¯é€šé™¢äºˆå®šãŒã‚ã‚Šã¾ã›ã‚“</div>';
            } else {
                html = '<div class="visit-list">';
                dayVisits.forEach(visit => {
                    html += `
                        <div class="visit-card">
                            <h3>${visit.userName}</h3>
                            <div class="visit-detail">
                                <div class="detail-row">
                                    <div class="detail-label">åŒ»ç™‚æ©Ÿé–¢</div>
                                    <div class="detail-value">${visit.hospitalName}</div>
                                </div>
                                <div class="detail-row">
                                    <div class="detail-label">ç§‘ç›®</div>
                                    <div class="detail-value">${visit.department || 'æœªå®š'}</div>
                                </div>
                                <div class="detail-row">
                                    <div class="detail-label">åŒ»å¸«</div>
                                    <div class="detail-value">${visit.doctor || 'æœªå®š'}</div>
                                </div>
                                <div class="detail-row">
                                    <div class="detail-label">æ™‚é–“</div>
                                    <div class="detail-value">${visit.time || 'æœªå®š'}</div>
                                </div>
                                <div class="detail-row">
                                    <div class="detail-label">é€šé™¢æ‰‹æ®µ</div>
                                    <div class="detail-value">${visit.transport || 'æœªå®š'}</div>
                                </div>
                                <div class="detail-row">
                                    <div class="detail-label">å¼•ç‡è·å“¡</div>
                                    <div class="detail-value">${visit.staff || 'æœªå®š'}</div>
                                </div>
                                <div class="detail-row">
                                    <div class="detail-label">åŒ»ç™‚æ©Ÿé–¢é›»è©±</div>
                                    <div class="detail-value">${visit.phone || 'æœªå®š'}</div>
                                </div>
                                <div class="detail-row">
                                    <div class="detail-label">å‚™è€ƒ</div>
                                    <div class="detail-value">${visit.notes || 'ãªã—'}</div>
                                </div>
                            </div>
                            <div class="edit-delete-btns">
                                <button class="edit-btn" onclick="openEditVisitModal(this.getAttribute('data-id'))" data-id="${visit.id}">ç·¨é›†</button>
                                <button class="delete-btn" onclick="deleteVisit(this.getAttribute('data-id'))" data-id="${visit.id}">å‰Šé™¤</button>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            html += `
                <div style="margin-top: 20px;">
                    <button onclick="openAddVisitModal('${dateStr}')" style="width: 100%; padding: 12px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 14px;">
                        + ã“ã®æ—¥ä»˜ã«é€šé™¢äºˆå®šã‚’è¿½åŠ 
                    </button>
                </div>
            `;
            
            document.getElementById('visit-details-area').innerHTML = html;
        }

        // å‰æœˆã¸
        function prevMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        }

        // ä»Šæœˆã¸
        function today() {
            currentDate = new Date();
            renderCalendar();
        }

        // æ¬¡æœˆã¸
        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        }

        // ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º
        function showAlert(message, type) {
            const alertContainer = document.getElementById('alert-container');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.textContent = message;
            alertContainer.appendChild(alert);
            setTimeout(() => alert.remove(), 3000);
        }

        // é€šé™¢æƒ…å ±è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
        function openAddVisitModal(dateStr) {
            editingVisitId = null;
            selectedDate = dateStr;
            document.getElementById('visit-modal-title').textContent = 'é€šé™¢æƒ…å ±ã‚’è¿½åŠ ';
            document.getElementById('visit-btn-confirm').textContent = 'è¿½åŠ ';
            document.getElementById('visit-user-name').value = '';
            document.getElementById('visit-hospital-name').value = '';
            document.getElementById('visit-department').value = '';
            document.getElementById('visit-doctor').value = '';
            document.getElementById('visit-time').value = '';
            document.getElementById('visit-transport').value = '';
            document.getElementById('visit-staff').value = '';
            document.getElementById('visit-phone').value = '';
            document.getElementById('visit-notes').value = '';
            document.getElementById('visit-modal').classList.add('show');
        }

        // é€šé™¢æƒ…å ±ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
        function openEditVisitModal(visitId) {
            visitId = parseInt(visitId);
            const visit = visits.find(v => v.id === visitId);
            
            if (!visit) {
                showAlert('é€šé™¢æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', 'error');
                return;
            }
            
            editingVisitId = visitId;
            selectedDate = visit.date;
            
            document.getElementById('visit-modal-title').textContent = 'é€šé™¢æƒ…å ±ã‚’ç·¨é›†';
            document.getElementById('visit-btn-confirm').textContent = 'æ›´æ–°';
            document.getElementById('visit-user-name').value = visit.userName;
            document.getElementById('visit-hospital-name').value = visit.hospitalName;
            document.getElementById('visit-department').value = visit.department;
            document.getElementById('visit-doctor').value = visit.doctor;
            document.getElementById('visit-time').value = visit.time;
            document.getElementById('visit-transport').value = visit.transport;
            document.getElementById('visit-staff').value = visit.staff;
            document.getElementById('visit-phone').value = visit.phone;
            document.getElementById('visit-notes').value = visit.notes;
            document.getElementById('visit-modal').classList.add('show');
        }

        // é€šé™¢æƒ…å ±ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        function closeVisitModal() {
            document.getElementById('visit-modal').classList.remove('show');
            editingVisitId = null;
        }

        // é€šé™¢æƒ…å ±ã‚’ä¿å­˜
        function saveVisit() {
            const userName = document.getElementById('visit-user-name').value;
            const hospitalName = document.getElementById('visit-hospital-name').value;
            
            if (!userName || !hospitalName) {
                showAlert('åˆ©ç”¨è€…åã¨åŒ»ç™‚æ©Ÿé–¢åã¯å¿…é ˆã§ã™', 'error');
                return;
            }
            
            const visitData = {
                date: selectedDate,
                userName: userName,
                hospitalName: hospitalName,
                department: document.getElementById('visit-department').value,
                doctor: document.getElementById('visit-doctor').value,
                time: document.getElementById('visit-time').value,
                transport: document.getElementById('visit-transport').value,
                staff: document.getElementById('visit-staff').value,
                phone: document.getElementById('visit-phone').value,
                notes: document.getElementById('visit-notes').value
            };
            
            if (editingVisitId) {
                const visit = visits.find(v => v.id === editingVisitId);
                Object.assign(visit, visitData);
                showAlert('é€šé™¢æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸ', 'success');
            } else {
                visitData.id = Math.max(...visits.map(v => v.id), 0) + 1;
                visits.push(visitData);
                showAlert('é€šé™¢æƒ…å ±ã‚’è¿½åŠ ã—ã¾ã—ãŸ', 'success');
            }
            
            saveVisits();
            renderCalendar();
            if (selectedDate) {
                renderDateDetails(selectedDate);
            }
            closeVisitModal();
        }

        // é€šé™¢æƒ…å ±ã‚’å‰Šé™¤
        function deleteVisit(visitId) {
            visitId = parseInt(visitId);
            if (!confirm('ã“ã®é€šé™¢æƒ…å ±ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) return;
            
            const beforeLength = visits.length;
            visits = visits.filter(v => v.id !== visitId);
            
            if (visits.length < beforeLength) {
                saveVisits();
                renderCalendar();
                if (selectedDate) {
                    renderDateDetails(selectedDate);
                }
                showAlert('é€šé™¢æƒ…å ±ã‚’å‰Šé™¤ã—ã¾ã—ãŸ', 'success');
            } else {
                showAlert('å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');
            }
        }

        // åˆæœŸåŒ–å®Ÿè¡Œ
        init();
    </script>


</body></html>